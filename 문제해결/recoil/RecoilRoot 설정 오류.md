# 문제
Next.js App Directory에서 `ReocoilRoot`를 Layout에 추가하는 경우 아래 오류 발생

```typescript
createContext only works in Client Components. Add the "use client" directive at the top of the file to use it.
Read more: https://nextjs.org/docs/messages/context-in-server-component
```
# 원인
전역으로 사용하는 Layout의 경우 `use client` 가 아니기 때문에 오류 발생

# 해결방법
`use client`형태의 provider 컴포넌트를 생성 하여 layout에 추가

1. Provider 생성
```typescript
//provider/RecoilProviderProps

'use client'

import { RecoilRoot } from 'recoil'

interface RecoilProviderProps {
  children: React.ReactNode
}

export default function RecoilProvider({ children }: RecoilProviderProps) {
  return <RecoilRoot>{children}</RecoilRoot>
}

```

2. Layout에 추가
```typescript
import './globals.css'
import BaseLayout from 'components/layout/Layout'
import type { Metadata } from 'next'
import { Inter } from 'next/font/google'
import RecoilProvider from 'providers/RecoilProvider'
const inter = Inter({ subsets: ['latin'] })

export const metadata: Metadata = {
  title: 'Create Next App',
  description: 'Generated by create next app',
}

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en">
      <body className={inter.className}>
        <RecoilProvider>
            <BaseLayout>{children}</BaseLayout>
        </RecoilProvider>
      </body>
    </html>
  )
}

```
