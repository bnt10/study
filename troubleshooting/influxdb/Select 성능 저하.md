
### 문제 발생
같은 조회 조건에서 Measurment 간의 조회 성능 이슈 발생
- `CPU Measurement`의 응답 시간은 0.3초.
- `IPMI Measurement`의 응답 시간은 11초로 매우 느림.

### 원인 분석

InfluxDB에서 태그(`tags`)는 인덱싱되어 WHERE 절에서 빠르게 데이터를 필터링하는 데 사용됩니다. 반면, 필드(`fields`)는 인덱싱되지 않아 필드 값으로만 필터링할 경우 전체 데이터셋을 스캔해야 하므로 비효율적입니다. `IPMI Measurement`에서 태그를 충분히 활용하지 않아 발생한 성능 저하입니다.

### 해결 방법

#### 태그 활용 강화

태그를 사용하여 데이터를 좁혀 나가는 전략을 구현합니다. 예를 들어, `location`, `sensor`, `type` 등의 태그를 사용하여 데이터를 구체적으로 필터링합니다. 이를 통해 쿼리 성능을 향상시킬 수 있습니다.

#### 쿼리 비교

**성능 개선 전: 태그를 활용하지 않은 쿼리**

```sql
SELECT mean("value")
FROM "Default.autogen.ipmi_sensor"
GROUP BY "hostnmae"
```

이 쿼리는 필드 값만을 이용하여 데이터를 조회하기 때문에 전체 데이터셋을 스캔해야 합니다.

**성능 개선 후: 태그를 활용한 쿼리**

```sql
SELECT mean("value")
FROM "Default.autogen.ipmi_sensor"
WHERE vendor = "dell" and rack="01"
GROUP BY "hostnmae"
```

이 쿼리는 태그를 활용하여 데이터를 구체적으로 필터링합니다. 태그를 사용함으로써 데이터베이스는 필요한 데이터 포인트를 빠르게 찾아내도록 최적화됩니다.

#### 분석 및 효과

태그를 사용하는 쿼리는 필드 값을 필터링하기 전에 먼저 태그를 통해 대상 데이터 집합의 크기를 줄이므로, 전체 데이터셋을 스캔하는 데 드는 시간을 대폭 줄일 수 있습니다. 결과적으로 응답 시간이 응답 시간이 `11초에서 1초로 개선되었을 때, 이는 약 90.91%`의  성능이 개선되었습니다.
