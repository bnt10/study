# JS 메모리 관리

## 메모리 관리

Javasciprt 가비지 컬렉터(Garbage Collector)을 사용하여 메모리 관리를 수행합니다.
가비지 컬렉터는 주기적으로 동작하여 더 이상 사용하지 않는 메모리를 자동으로 해제합니다.

Javascript에서 변수를 선언하고 값을 할당하는 경우, 해당 값이 저장되는 메모리 공간을 자동으로
할당합니다. 이때, 변수가 더 이상 사용되지 않는 경우에는 해당 메모리 공간을 강비 컬렉터가 감지하여
자동으로 해제합니다. 변수가 더 이상 사용되지 않는 경우는 다음과 같습니다.

1. 변수가 null 또는 undifned 값을 가질 경우
2. 변수를 사용하는 코드 블록이 종료된 경우
3. 변수를 사용하는 객체가 더 이상 참조되지 않는 경우

가비지 컬렉터는 더 이상 사용되지 않는 메모리를 해제함으로써 메모리 누수(Memory Leak)
을 방지합니다. 여기서 메모리 누수란 더이상 사용되지 않는 메모리를 해제하지 않고 계속해서 쌓아나가는 현상을
말합니다. 메모리 누수가 발생하면, 시스템 자원이 낭비되어 성능 저하나 안정성 문제를 유발할 수 있습니다.

## 생성자와 소멸자

가비지 컬렉터 이외도 메모리 관리를 위한 몇 가지 기능이 제공됩니다. 예를 들어 객체를 생성할 때에는
생성자 함수에서 메모리를 초기화 하고, 객체를 소멸시킬 때에는 소멸자 함수에서 메모리를 해제합니다.
클로저를 사용하여 실행될 때마다 메모리를 할당하고 해제도 가능합니다. 이러한 기능들을
가비지 컬렉터와 함께 사용하면 효과적인 메모리 관리를 수행 할 수 있습니다.

다음은 객체를 생성할 때 생성자 함수에서 메모미를 초기화하고, 객체를 소멸시킬 때에는 소멸자 함수에서
메모리를 해제하는 예시입니다.

```javascript
function Person(name, age) {
  this.name = name
  this.age = age
  this.sayHello = function () {
    console.log(`Hello, my name is ${this.name} and I'm ${this.age} years old`)
  }
  // 객체가 생성될 때 마다 메모리를 초기화하기 위해, 생성자 함수에서 객체를 초기화 합니다.
}

const john = new Person('John', 30)
const mary = new Person('Mary', 25)

john.sayHello()
mary.sayHello()

john = null
mary = null
// 객체가 소멸될 때마다 메모리를 해제하기 위해 변수 null로 할당합니다.
```

위 코드에서 Person 생성자 함수에서 객체를 초기화하는 과정을 수행하고 있습니다. 생성자
함수에서는 객체의 프로퍼티와 메소드를 초기화하여 이를 통해 객체를 생성합니다. 이후 john과 mary
객체를 생성하여 각각 sayHello 메소드를 호출하고 있습니다.

객체가 더 이상 사용되지 않는 경우 john과 mary 변수에 Null 값을 할당함으로써 메모리를 해제합니다.
이렇게 객체를 생성자 함수와 소멸자 함수를 사용하여 초기화하고 해제함으로써 메모리 누수를 방지 할 수 있습니다.

**물론 이렇게 null을 할당한다고 메모리에서 즉시 해제되는 것은 아닙니다.**
가비지 컬렉터에 의해서 주기적으로 더 이상 사용되지 않느 메모리를 해지 되기 떄문에
컬렉터가 일정 주기에 도달하면 null이 할당된 객체에 대해서 메모리를 해제 하게 됩니다.

또한 가비지 컬렉터는 블록 스코프가 끝나게 되면 해제 작업을 진행하기 때문에
john , mary가 블록 스코프에 존재하는 경우 블록 스코프가 끝나는 시점에 종료하게 됩니다.
단 전역 상태, 함수 스코프에서 선언한 변수는 해당 스코프가 종료되어도 메모리에서 할당이 해제되지 않기때문에
이러한 변수에는 Null을 할당하여 가비지 컬렉터에게 해당 변수가 메모리에서 해제될 수 있도록 알려줘야 합니다.
